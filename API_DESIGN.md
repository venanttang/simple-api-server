# API_DESIGN.md

## API Overview

This service exposes two HTTP endpoints:

- `GET /api/tree` â€” Retrieve a tree structure.
- `POST /api/tree` â€” Add a new node to the tree.

---

## 1. `GET /api/tree`

### Description
Retrieve the hierarchical tree structure.

### Request

- **Method:** `GET`
- **URL:** `/api/tree`
- **Query Parameters:** *(None)*

Example request:

```http
GET /api/tree HTTP/1.1
Host: yourdomain.com
```

---

### Response

- **Status Code:** `200 OK`
- **Body:**

```json
[
  {
    "id": 1,
    "label": "root",
    "children": [
      {
        "id": 3,
        "label": "bear",
        "children": [
          {
            "id": 4,
            "label": "cat",
            "children": []
          }
        ]
      },
      {
        "id": 7,
        "label": "frog",
        "children": []
      }
    ]
  }
]
```

- **Errors:**
  | Status Code | Message               | Notes |
  |-------------|------------------------|-------|
  | 500         | `Internal Server Error` | On server-side failure |

---

## 2. `POST /api/tree`

### Description
Add a new node to the tree under a specific parent node.

### Request

- **Method:** `POST`
- **URL:** `/api/tree`
- **Body Parameters:**
  | Name       | Type    | Required | Description                         |
  |------------|---------|----------|-------------------------------------|
  | `label`    | string  | Yes      | The label for the new node          |
  | `parentId` | integer | Yes      | ID of the parent node to attach to  |

Example request:

```http
POST /api/tree HTTP/1.1
Host: yourdomain.com
Content-Type: application/json

{
  "label": "catâ€™s child",
  "parentId": 4
}
```

---

### Response

- **Status Code:** `201 Created`
- **Body:**

```json
{
  "id": 8,
  "label": "catâ€™s child",
  "parentId": 4,
  "status": "created"
}
```

- **Errors:**
  | Status Code | Message                     | Notes |
  |-------------|------------------------------|-------|
  | 400 (or 422)| `Invalid input data`          | If request body is missing required fields |
  | 404 (or 422)| `Parent node not found`       | If the given `parentId` does not exist |
  | 500         | `Internal Server Error`       | On server-side failure |

---

## ðŸ“Œ Notes

- All responses are in `application/json` format.
- Tree nodes must have unique IDs (generated by the server).
- The tree can be nested to arbitrary depth.

---

## ðŸ“‹ Example Summary Table

| Method | Endpoint     | Description             |
|:------:|--------------|--------------------------|
| GET    | `/api/tree`   | Retrieve tree structure  |
| POST   | `/api/tree`   | Add a new node to the tree |

---

# âœ… End of API Design
